MIGRATION GUIDE: TURSO to SUPABASE
==================================

Time: 30-40 minutes
Difficulty: Easy
Risk: Very Low

STEP 1: CREATE SUPABASE ACCOUNT
1. Go to https://supabase.com
2. Sign up with GitHub
3. Create new project named "car-listings"
4. Wait for initialization (2-3 minutes)

STEP 2: GET CONNECTION STRING
1. Go to Settings > Database
2. Copy PostgreSQL connection string
3. Save it for Step 5

STEP 3: CREATE TABLES
In Supabase SQL Editor, run:

CREATE TABLE IF NOT EXISTS seen_listings (
    id TEXT PRIMARY KEY,
    created_at TEXT NOT NULL,
    last_notified_at TEXT,
    notified INTEGER DEFAULT 0
);

CREATE TABLE IF NOT EXISTS vehicle_details (
    listing_id TEXT PRIMARY KEY REFERENCES seen_listings(id),
    make TEXT, model TEXT, year INTEGER,
    price REAL, currency TEXT,
    mileage_km INTEGER, location TEXT,
    seller_name TEXT, url TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);

STEP 4: INSTALL DRIVER
pip install psycopg2-binary

STEP 5: UPDATE .env.local
DATABASE_URL=postgresql://user:pass@host:5432/db

STEP 6: UPDATE database.py
Replace libsql_client with psycopg2:

  OLD: from libsql_client import create_client_sync
  NEW: import psycopg2

  OLD: self.client = create_client_sync(url=db_url, auth_token=auth_token)
  NEW: self.conn = psycopg2.connect(db_url)

  OLD: result = self.client.execute(query, [param])
  NEW: cursor.execute(query, [param])

STEP 7: UPDATE main.py
  OLD: DatabaseManager(db_url, auth_token)
  NEW: DatabaseManager(os.getenv("DATABASE_URL"))

STEP 8: TEST
python main.py

BENEFITS
- No more 505 errors
- PostgreSQL reliability
- Better free tier (500MB)
- Better support
- Same SQL syntax

QUESTIONS?
See DATABASE_ALTERNATIVES.md for detailed comparisons
